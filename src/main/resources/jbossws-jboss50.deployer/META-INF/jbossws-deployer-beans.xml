<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">
  
  <!--
    A web service deployer that hooks in after the EJB deployers
  -->
  <bean name="WebServiceDeployerEJB" class="org.jboss.wsf.container.jboss50.WebServiceDeployerEJB">
    <property name="relOrderEJB2x"><inject bean="EJB2xDeployer" property="relativeOrder"/></property>
    <property name="relOrderEJB3"><inject bean="EJBRegistrationDeployer" property="relativeOrder"/></property>
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>EJB2xDeployer</depends>
    <depends>EJBRegistrationDeployer</depends>
  </bean>
  
  <!--
    A web service deployer that hooks in before the WAR deployer
  -->
  <bean name="WebServiceDeployerJSE" class="org.jboss.wsf.container.jboss50.WebServiceDeployerJSE">
    <property name="relOrderWar"><inject bean="WarDeployer" property="relativeOrder"/></property>
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>WebAppParsingDeployer</depends>
  </bean>
  
  <!--
    A web service deployer that hooks in after the web service WAR/EJB deployers
  -->
  <bean name="WebServiceMainDeployer" class="org.jboss.wsf.container.jboss50.WebServiceMainDeployer">
    <property name="relOrderJSE"><inject bean="WebServiceDeployerJSE" property="relativeOrder"/></property>
    <property name="relOrderEJB"><inject bean="WebServiceDeployerEJB" property="relativeOrder"/></property>
    <install bean="MainDeployer" method="addDeployer">
      <parameter>
        <this/>
      </parameter>
    </install>
    <uninstall bean="MainDeployer" method="removeDeployer">
      <parameter>
        <this/>
      </parameter>
    </uninstall>
    <depends>WarDeployer</depends>
    <depends>WebServiceDeployerEJB</depends>
    <depends>WebServiceDeployerJSE</depends>
  </bean>
  
</deployment>
