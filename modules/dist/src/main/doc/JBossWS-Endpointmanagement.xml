<?xml version="1.0" encoding="UTF-8"?><chapter id="chap_JBossWS-Endpointmanagement"><title>JBossWS-Endpointmanagement</title><para>JBossWS registers MBeans that users can leverage to manage every webservice endpoint. Apart from the obvious start/stop functionalities, they provide valuable information and statistics about messages processed by the endpoints.</para><para/><para> </para><section id="JBossWS-Endpointmanagement_Getting_the_information"><title>Getting the information</title><para>JBoss ships with a JMX-Console with all the application server MBeans. It is usually available at URL <ulink url="http://localhost:8080/jmx-console">http://localhost:8080/jmx-console</ulink>. For endpoint management you might be interested in the MBeans belonging to the jboss.ws domain.</para><para>The application server also has an applet based web-console which basically has the same data as the JMX-Console plus some advanced features including snapshot graphics.</para><para>Of course you can access an MBean programmatically too. Please refer to the <ulink url="http://wiki.jboss.org/wiki/Wiki.jsp?page=FAQJBossJMX">JBoss JMX faq</ulink> for further details; here is a brief code snippet you might want to start from in order to access a ManagedEndpointMBean from the same virtual machine:</para><screen xml:space="preserve"><emphasis role="bold">try</emphasis>
{
  MBeanServer server = MBeanServerLocator.locate();
  ManagedEndpointMBean mep = (ManagedEndpointMBean)MBeanProxyExt.create(
            ManagedEndpointMBean.class,
            "jboss.ws:context=my-ctx,endpoint=MyEndpoit",
            server);
  ...
}
<emphasis role="bold">catch</emphasis> (Exception e)
{
  e.printStackTrace();
}
</screen></section>
<section id="JBossWS-Endpointmanagement_Metrics"><title>Metrics</title><para>For each deployed endpoint you'll find an <emphasis>org.jboss.ws.common.management.ManagedEndpoint</emphasis> MBean providing basic start/stop functionalities and metrics. Calling a stopped endpoint will always result in a SOAP fault message.</para><para>The metrics available for each managed endpoint are:</para><itemizedlist><listitem><para> Min, max, average and total processing time: processing includes both the WS stack plus application server work and the user business logic </para></listitem><listitem><para> Last start and stop time </para></listitem><listitem><para> Request, response and fault count</para></listitem></itemizedlist></section>
<section id="JBossWS-Endpointmanagement_Records"><title>Records</title><para>JBossWS features a highly configurable records' collection and management system. Each record is basically composed of a message plus additional information (for example the caller address and the called endpoint operation).</para><para>Endpoints can be configured with record processors that are invoked whenever a message flow is detected and records are thus created.</para><para>Every deployed endpoint is configured with default record processors. However custom processors as well as record filters can be easily plugged in and managed at any time through JMX. This gives users the chance of performing advanced analysis of the webservice traffic according to their business requirements.</para><para>Please refer to the <ulink url="http://jbossws.jboss.org/mediawiki/index.php?title=Records_management">records management page</ulink> for further details.</para></section>
<section id="JBossWS-Endpointmanagement_Snapshots_and_threshold_monitors"><title>Snapshots and threshold monitors</title><para>As previously said, the <ulink url="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsole">JBoss Web Console</ulink> has interesting features including <ulink url="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsoleSnapshots">snapshots</ulink> and <ulink url="http://wiki.jboss.org/wiki/Wiki.jsp?page=WebConsoleMonitoring">threshold monitors</ulink>.</para><para>Snapshots allow users to record changes of a given MBean attribute within a defined time interval. Data are sampled at a given rate and may be plotted to graphs with a few clicks. Snapshots are listed in the Web console and can be created simply browsing to <ulink url="http://localhost:8080/web-console/createSnapshot.jsp">http://localhost:8080/web-console/createSnapshot.jsp</ulink> .</para><para>Threshold monitors allow users to be notified whenever a given MBean attribute exceed a certain range of values. The threshold monitor's creation and management processes are similar to those mentioned above for the snapshots. Simply browse to <ulink url="http://localhost:8080/web-console/createThresholdMonitor.jsp">http://localhost:8080/web-console/createThresholdMonitor.jsp</ulink> .</para><para>Speaking of WS availability and SLA, this all becomes interesting because users can monitor and take snapshots of critical attributes like the average/max processing time of a managed endpoint. Moreover, advanced analysis can be performed leveraging ad-hoc attributes of custom <ulink url="http://jbossws.jboss.org/mediawiki/index.php?title=Endpoint_management#Records">record processors</ulink>.</para></section>
</chapter>